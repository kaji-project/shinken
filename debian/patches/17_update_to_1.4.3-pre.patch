diff --git a/Changelog b/Changelog
index a6df839..f241ceb 100644
--- a/Changelog
+++ b/Changelog
@@ -2,6 +2,17 @@
 Shinken ChangeLog
 #######################
 
+1.4.3 - XX/XX/2014
+-------------------
+	CORE FIXES (backport)
+	Fix : Too much brok generated when a trigger modifies it
+	Fix : Possible inconsistant state saved in retention for downtimes
+
+
+	MODULES FIXES (backport)
+	Fix : Graphite module skipping 0 values
+
+
 1.4.2 - 06/03/2014
 ------------------
 	CORE ENHANCEMENT (backport)
diff --git a/doc/source/03_configuration/configmain-advanced.rst b/doc/source/03_configuration/configmain-advanced.rst
new file mode 100644
index 0000000..85c96cd
--- /dev/null
+++ b/doc/source/03_configuration/configmain-advanced.rst
@@ -0,0 +1,1351 @@
+.. _configuration/configmain-advanced:
+
+===========================
+Main advanced configuration
+===========================
+
+
+Tuning and advanced parameters
+===============================
+
+.. important::  If you do not know how to change the values of theses parameters, don't touch them :)
+   (and ask for help on the mailing list).
+
+
+Performance data parameters 	
+============================
+
+Performance Data Processor Command Timeout 
+-------------------------------------------
+
+Format:  
+
+::
+
+  perfdata_timeout=<seconds>
+
+Example:  
+
+::
+
+  perfdata_timeout=5
+  
+This is the maximum number of seconds that Shinken will allow a :ref:`host performance data processor command <configuration/configmain-advanced#host_perfdata_file_processing_command>` or :ref:`service performance data processor command <configuration/configmain-advanced#service_perfdata_file_processing_command>` to be run. If a command exceeds this time limit it will be killed and a warning will be logged.
+
+
+.. _configuration/configmain-advanced#process_performance_data:
+
+Performance Data Processing Option 
+-----------------------------------
+
+Format:
+
+::
+
+  process_performance_data=<0/1>
+
+Example:
+
+::
+
+  process_performance_data=1
+
+This value determines whether or not Shinken will process host and service check :ref:`performance data <advanced/perfdata>`.
+
+  * 0 = Don't process performance data 
+  * 1 = Process performance data (default)
+
+If you want to use tools like PNP, NagiosGrapher or Graphite set it to 1.
+
+
+.. _configuration/configmain-advanced#host_perfdata_command:
+.. _configuration/configmain-advanced#service_perfdata_command:
+
+Host/Service Performance Data Processing Command 
+-------------------------------------------------
+
+Format:
+
+::
+
+  host_perfdata_command=<configobjects/command>
+  service_perfdata_command=<configobjects/command>
+
+Example:
+
+::
+
+  host_perfdata_command=process-host-perfdata
+  services_perfdata_command=process-service-perfdata
+  
+This option allows you to specify a command to be run after every host/service check to process host/service :ref:`performance data <advanced/perfdata>` that may be returned from the check. The command argument is the short name of a :ref:`command definition <configobjects/command>` that you define in your object configuration file. This command is only executed if the :ref:`Performance Data Processing Option <configuration/configmain-advanced#process_performance_data>` option is enabled globally and if the "process_perf_data" directive in the :ref:`host definition <configobjects/host>` is enabled.
+
+
+.. _configuration/configmain-advanced#host_perfdata_file:
+.. _configuration/configmain-advanced#service_perfdata_file:
+
+Host/Service Performance Data File 
+-----------------------------------
+
+Format:
+
+::
+
+  host_perfdata_file=<file_name>
+  service_perfdata_file=<file_name>
+
+Example:
+
+::
+
+  host_perfdata_file=/var/lib/shinken/host-perfdata.dat
+  service_perfdata_file=/var/lib/shinken/service-perfdata.dat
+  
+This option allows you to specify a file to which host/service :ref:`performance data <advanced/perfdata>` will be written after every host check. Data will be written to the performance file as specified by the :ref:`Host Performance Data File Template <configuration/configmain-advanced#host_perfdata_file_template>` option or the service one. Performance data is only written to this file if the :ref:`Performance Data Processing Option <configuration/configmain-advanced#process_performance_data>` option is enabled globally and if the "process_perf_data" directive in the :ref:`host definition <configobjects/host>` is enabled.
+
+
+.. _configuration/configmain-advanced#host_perfdata_file_template:
+
+Host Performance Data File Template 
+------------------------------------
+
+Format:
+
+::
+
+  host_perfdata_file_template=<template>
+
+Example:
+
+::
+
+  host_perfdata_file_template=[HOSTPERFDATA]\t$TIMET$\t$HOSTNAME$\t$HOSTEXECUTIONTIME$\t$HOSTOUTPUT$\t$HOSTPERFDATA$
+  
+This option determines what (and how) data is written to the :ref:`host performance data file <configuration/configmain-advanced#host_perfdata_file>`. The template may contain :ref:`macros <thebasics/macros>`, special characters (\t for tab, \r for carriage return, \n for newline) and plain text. A newline is automatically added after each write to the performance data file.
+
+
+.. _configuration/configmain-advanced#service_perfdata_file_template:
+
+Service Performance Data File Template 
+---------------------------------------
+
+Format:
+
+::
+
+  service_perfdata_file_template=<template>
+
+Example:
+
+::
+
+  service_perfdata_file_template=[SERVICEPERFDATA]\t$TIMET$\t$HOSTNAME$\t$SERVICEDESC$\t$SERVICEEXECUTIONTIME$\t$SERVICELATENCY$\t$SERVICEOUTPUT$\t$SERVICEPERFDATA$
+  
+This option determines what (and how) data is written to the :ref:`service performance data file <configuration/configmain-advanced#service_perfdata_file>`. The template may contain :ref:`macros <thebasics/macros>`, special characters (\t for tab, \r for carriage return, \n for newline) and plain text. A newline is automatically added after each write to the performance data file.
+
+
+.. _configuration/configmain-advanced#host_perfdata_file_mode:
+.. _configuration/configmain-advanced#service_perfdata_file_mode:
+
+Host/Service Performance Data File Mode 
+----------------------------------------
+
+Format:
+
+::
+
+  host_perfdata_file_mode=<mode>
+  service_perfdata_file_mode=<mode>
+
+Example:
+
+::
+
+  host_perfdata_file_mode=a
+  service_perfdata_file_mode=a
+  
+This option determines how the :ref:`host performance data file <configuration/configmain-advanced#host_perfdata_file>` (or the service one) is opened. Unless the file is a named pipe you'll probably want to use the default mode of append.
+
+  * a = Open file in append mode (default)
+  * w = Open file in write mode
+  * p = Open in non-blocking read/write mode (useful when writing to pipes)
+
+
+.. _configuration/configmain-advanced#host_perfdata_file_processing_interval:
+.. _configuration/configmain-advanced#service_perfdata_file_processing_interval:
+
+Host/Service Performance Data File Processing Interval (Unused) 
+----------------------------------------------------------------
+
+Format:
+
+::
+
+  host_perfdata_file_processing_interval=<seconds>
+  service_perfdata_file_processing_interval=<seconds>
+
+Example:
+
+::
+
+  host_perfdata_file_processing_interval=0
+  service_perfdata_file_processing_interval=0
+  
+This option allows you to specify the interval (in seconds) at which the :ref:`host performance data file <configuration/configmain-advanced#host_perfdata_file>` (or the service one) is processed using the :ref:`host performance data file processing command <configuration/configmain-advanced#host_perfdata_command>`. A value of 0 indicates that the performance data file should not be processed at regular intervals.
+
+
+.. _configuration/configmain-advanced#host_perfdata_file_processing_command:
+.. _configuration/configmain-advanced#service_perfdata_file_processing_command:
+
+Host/Service Performance Data File Processing Command (Unused) 
+---------------------------------------------------------------
+
+Format:
+
+::
+
+  host_perfdata_file_processing_command=<configobjects/command>
+  service_perfdata_file_processing_command=<configobjects/command>
+
+Example:
+
+::
+
+  host_perfdata_file_processing_command=process-host-perfdata-file
+  service_perfdata_file_processing_command=process-service-perfdata-file
+  
+This option allows you to specify the command that should be executed to process the :ref:`host performance data file <configuration/configmain-advanced#host_perfdata_file>` (or the service one). The command argument is the short name of a :ref:`command definition <configobjects/command>` that you define in your object configuration file. The interval at which this command is executed is determined by the :ref:`host_perfdata_file_processing_interval <configuration/configmain-advanced#host_perfdata_file_processing_interval>` directive.
+
+
+Advanced scheduling parameters 
+===============================
+
+
+.. _configuration/configmain-advanced#passive_host_checks_are_soft:
+
+Passive Host Checks Are SOFT Option (Not implemented) 
+------------------------------------------------------
+
+Format:
+
+::
+
+  passive_host_checks_are_soft=<0/1>
+
+Example:
+
+::
+
+  passive_host_checks_are_soft=1
+  
+This option determines whether or not Shinken will treat :ref:`passive host checks <thebasics/passivechecks>` as HARD states or SOFT states. By default, a passive host check result will put a host into a :ref:`HARD state type <thebasics/statetypes>`. You can change this behavior by enabling this option.
+
+  * 0 = Passive host checks are HARD (default)
+  * 1 = Passive host checks are SOFT
+
+
+
+.. _configuration/configmain-advanced#enable_predictive_host_dependency_checks:
+.. _configuration/configmain-advanced#enable_predictive_service_dependency_checks:
+
+Predictive Host/Service Dependency Checks Option (Unused) 
+----------------------------------------------------------
+
+Format:
+
+::
+
+  enable_predictive_host_dependency_checks=<0/1>
+  enable_predictive_service_dependency_checks=<0/1>
+
+Example:
+
+::
+
+  enable_predictive_host_dependency_checks=1
+  enable_predictive_service_dependency_checks=1
+  
+This option determines whether or not Shinken will execute predictive checks of hosts/services that are being depended upon (as defined in :ref:`host/services dependencies <advanced/dependencies>`) for a particular host/service when it changes state. Predictive checks help ensure that the dependency logic is as accurate as possible. More information on how predictive checks work can be found :ref:`here <advanced/dependencychecks>`.
+
+  * 0 = Disable predictive checks
+  * 1 = Enable predictive checks (default)
+
+
+.. _configuration/configmain-advanced#check_for_orphaned_services:
+.. _configuration/configmain-advanced#check_for_orphaned_hosts:
+
+Orphaned Host/Service Check Option 
+-----------------------------------
+
+Format:
+
+::
+
+  check_for_orphaned_services=<0/1>
+  check_for_orphaned_hosts=<0/1>
+
+Example:
+
+::
+
+  check_for_orphaned_services=1
+  check_for_orphaned_hosts=1
+  
+This option allows you to enable or disable checks for orphaned service/host checks. Orphaned checks are checks which have been launched to pollers but have not had any results reported in a long time.
+
+Since no results have come back in for it, it is not rescheduled in the event queue. This can cause checks to stop being executed. Normally it is very rare for this to happen - it might happen if an external user or process killed off the process that was being used to execute a check.
+
+If this option is enabled and Shinken finds that results for a particular check have not come back, it will log an error message and reschedule the check. If you start seeing checks that never seem to get rescheduled, enable this option and see if you notice any log messages about orphaned services.
+
+  * 0 = Don't check for orphaned service checks
+  * 1 = Check for orphaned service checks (default)
+
+
+
+
+.. _configuration/configmain-advanced#soft_state_dependencies:
+
+Soft State Dependencies Option (Not implemented) 
+-------------------------------------------------
+
+Format:  soft_state_dependencies=<0/1>
+Example:  soft_state_dependencies=0
+
+This option determines whether or not Shinken will use soft state information when checking :ref:`host and service dependencies <advanced/dependencies>`. Normally it will only use the latest hard host or service state when checking dependencies. If you want it to use the latest state (regardless of whether its a soft or hard :ref:`state type <thebasics/statetypes>`), enable this option.
+
+  * 0 = Don't use soft state dependencies (default)
+  * 1 = Use soft state dependencies
+
+
+Performance tuning 
+===================
+
+.. _configuration/configmain-advanced#cached_host_check_horizon:
+.. _configuration/configmain-advanced#cached_service_check_horizon:
+
+Cached Host/Service Check Horizon 
+----------------------------------
+
+Format:
+
+::
+
+  cached_host_check_horizon=<seconds>
+  cached_service_check_horizon=<seconds>
+
+Example:
+
+::
+
+   cached_host_check_horizon=15
+   cached_service_check_horizon=15
+  
+This option determines the maximum amount of time (in seconds) that the state of a previous host check is considered current. Cached host states (from host/service checks that were performed more recently than the time specified by this value) can improve host check performance immensely. Too high of a value for this option may result in (temporarily) inaccurate host/service states, while a low value may result in a performance hit for host/service checks. Use a value of 0 if you want to disable host/service check caching. More information on cached checks can be found :ref:`here <advanced/cachedchecks>`.
+
+.. tip::  Nagios default is 15s, but it's a tweak that make checks less accurate. So Shinken use 0s as a default. If you have performances problems and you can't add a new scheduler or poller, increase this value and start to buy a new server because this won't be magical.
+
+
+.. _configuration/configmain-advanced#use_large_installation_tweaks:
+
+Large Installation Tweaks Option 
+---------------------------------
+
+Format:
+
+::
+
+  use_large_installation_tweaks=<0/1>
+
+Example:
+
+::
+
+  use_large_installation_tweaks=0
+  
+This option determines whether or not the Shinken daemon will take shortcuts to improve performance. These shortcuts result in the loss of a few features, but larger installations will likely see a lot of benefit from doing so. If you can't add new satellites to manage the load (like new pollers), you can activate it. More information on what optimizations are taken when you enable this option can be found :ref:`here <tuning/largeinstalltweaks>`.
+
+  * 0 = Don't use tweaks (default)
+  * 1 = Use tweaks
+
+
+
+Flapping parameters 
+====================
+
+.. _configuration/configmain-advanced#enable_flap_detection:
+
+Flap Detection Option 
+----------------------
+
+Format:
+
+::
+
+  enable_flap_detection=<0/1>
+
+Example:
+
+::
+
+  enable_flap_detection=1
+  
+This option determines whether or not Shinken will try and detect hosts and services that are “flapping". Flapping occurs when a host or service changes between states too frequently, resulting in a barrage of notifications being sent out. When Shinken detects that a host or service is flapping, it will temporarily suppress notifications for that host/service until it stops flapping.
+
+More information on how flap detection and handling works can be found :ref:`here <advanced/flapping>`.
+
+  * 0 = Don't enable flap detection (default)
+  * 1 = Enable flap detection
+
+
+.. _configuration/configmain-advanced#low_host_flap_threshold:
+.. _configuration/configmain-advanced#low_service_flap_threshold:
+
+Low Service/Host Flap Threshold 
+--------------------------------
+
+Format:
+
+::
+
+  low_service_flap_threshold=<percent>
+  low_host_flap_threshold=<percent>
+
+Example:
+
+::
+
+  low_service_flap_threshold=25.0
+  low_host_flap_threshold=25.0
+  
+This option is used to set the low threshold for detection of host/service flapping. For more information on how flap detection and handling works (and how this option affects things) read :ref:`this <advanced/flapping>`.
+
+
+.. _configuration/configmain-advanced#high_host_flap_threshold:
+.. _configuration/configmain-advanced#high_service_flap_threshold:
+
+High Service/Host Flap Threshold 
+---------------------------------
+
+Format:
+
+::
+
+  high_service_flap_threshold=<percent>
+  high_host_flap_threshold=<percent>
+
+Example:
+
+::
+
+  high_service_flap_threshold=50.0
+  high_host_flap_threshold=50.0
+  
+This option is used to set the high threshold for detection of host/service flapping. For more information on how flap detection and handling works (and how this option affects things) read :ref:`this <advanced/flapping>`.
+
+
+
+
+.. _configuration/configmain-advanced#event_handler_timeout:
+.. _configuration/configmain-advanced#notification_timeout:
+
+Various commands Timeouts 
+--------------------------
+
+Format:
+
+::
+
+  event_handler_timeout=<seconds>  # default: 30s
+  notification_timeout=<seconds>   # default: 30s
+  ocsp_timeout=<seconds>           # default: 15s
+  ochp_timeout=<seconds>           # default: 15s
+
+Example:
+
+::
+
+  event_handler_timeout=60
+  notification_timeout=60
+  ocsp_timeout=5
+  ochp_timeout=5
+  
+This is the maximum number of seconds that Shinken will allow :ref:`event handlers <advanced/eventhandlers>`, notification, :ref:`obsessive compulsive service processor command <configuration/configmain-advanced#ocsp_command>` or a :ref:`Obsessive Compulsive Host Processor Command <configuration/configmain-advanced#ochp_command>` to be run. If an command exceeds this time limit it will be killed and a warning will be logged.
+
+There is often widespread confusion as to what this option really does. It is meant to be used as a last ditch mechanism to kill off commands which are misbehaving and not exiting in a timely manner. It should be set to something high (like 60 seconds or more for notification, less for oc*p commands), so that each event handler command normally finishes executing within this time limit. If an event handler runs longer than this limit, Shinken will kill it off thinking it is a runaway processes.
+
+
+Old Obsess Over commands 
+=========================
+
+.. _configuration/configmain-advanced#obsess_over_services:
+
+Obsess Over Services Option 
+----------------------------
+
+Format:
+
+::
+
+  obsess_over_services=<0/1>
+
+Example:
+
+::
+
+  obsess_over_services=1
+  
+This value determines whether or not Shinken will “obsess" over service checks results and run the :ref:`obsessive compulsive service processor command <configuration/configmain-advanced#ocsp_command>` you define. I know _ funny name, but it was all I could think of. This option is useful for performing :ref:`distributed monitoring <advanced/distributed>`. If you're not doing distributed monitoring, don't enable this option.
+
+  * 0 = Don't obsess over services (default)
+  * 1 = Obsess over services
+
+
+.. _configuration/configmain-advanced#ocsp_command:
+
+Obsessive Compulsive Service Processor Command 
+-----------------------------------------------
+
+Format:
+
+::
+
+  ocsp_command=<configobjects/command>
+
+Example:
+
+::
+
+  ocsp_command=obsessive_service_handler
+
+This option allows you to specify a command to be run after every service check, which can be useful in :ref:`distributed monitoring <advanced/distributed>`. This command is executed after any :ref:`event handler <advanced/eventhandlers>` or :ref:`notification <thebasics/notifications>` commands. The command argument is the short name of a :ref:`command definition <configobjects/command>` that you define in your object configuration file.
+
+It's used nearly only for the old school distributed architecture. If you use it, please look at new architecture capabilities that are far efficient than the old one. More information on distributed monitoring can be found :ref:`here <advanced/distributed>`. This command is only executed if the :ref:`Obsess Over Services Option <configuration/configmain-advanced#obsess_over_services>` option is enabled globally and if the "obsess_over_service" directive in the :ref:`service definition <configobjects/service>` is enabled.
+
+
+.. _configuration/configmain-advanced#obsess_over_hosts:
+
+Obsess Over Hosts Option 
+-------------------------
+
+Format:
+
+::
+
+  obsess_over_hosts=<0/1>
+
+Example:
+
+::
+
+  obsess_over_hosts=1
+  
+This value determines whether or not Shinken will “obsess" over host checks results and run the :ref:`obsessive compulsive host processor command <configuration/configmain-advanced#ochp_command>` you define. Same like the service one but for hosts :)
+
+  * 0 = Don't obsess over hosts (default)
+  * 1 = Obsess over hosts
+
+
+.. _configuration/configmain-advanced#ochp_command:
+
+Obsessive Compulsive Host Processor Command 
+--------------------------------------------
+
+Format:
+
+::
+
+  ochp_command=<configobjects/command>
+
+Example:
+
+::
+
+  ochp_command=obsessive_host_handler
+  
+This option allows you to specify a command to be run after every host check, which can be useful in :ref:`distributed monitoring <advanced/distributed>`. This command is executed after any :ref:`event handler <advanced/eventhandlers>` or :ref:`notification <thebasics/notifications>` commands. The command argument is the short name of a :ref:`command definition <configobjects/command>` that you define in your object configuration file. 
+
+This command is only executed if the :ref:`Obsess Over Hosts Option <configuration/configmain-advanced#obsess_over_hosts>` option is enabled globally and if the "obsess_over_host" directive in the :ref:`host definition <configobjects/host>` is enabled.
+
+
+Freshness check 
+================
+
+.. _configuration/configmain-advanced#check_service_freshness:
+.. _configuration/configmain-advanced#check_host_freshness:
+
+Host/Service Freshness Checking Option 
+---------------------------------------
+
+Format:
+
+::
+
+  check_service_freshness=<0/1>
+  check_host_freshness=<0/1>
+
+Example:
+
+::
+
+  check_service_freshness=0
+  check_host_freshness=0
+  
+This option determines whether or not Shinken will periodically check the “freshness" of host/service checks. Enabling this option is useful for helping to ensure that :ref:`passive service checks <thebasics/passivechecks>` are received in a timely manner. More information on freshness checking can be found :ref:`here <advanced/freshness>`.
+
+  * 0 = Don't check host/service freshness
+  * 1 = Check host/service freshness (default)
+
+
+.. _configuration/configmain-advanced#service_freshness_check_interval:
+.. _configuration/configmain-advanced#host_freshness_check_interval:
+
+Host/Service Freshness Check Interval 
+--------------------------------------
+
+Format:
+
+::
+
+  service_freshness_check_interval=<seconds>
+  host_freshness_check_interval=<seconds>
+
+Example:
+
+::
+
+  service_freshness_check_interval=60
+  host_freshness_check_interval=60
+  
+This setting determines how often (in seconds) Shinken will periodically check the “freshness" of host/service check results. If you have disabled host/service freshness checking (with the :ref:`check_service_freshness <configuration/configmain-advanced#check_service_freshness>` option), this option has no effect. More information on freshness checking can be found :ref:`here <advanced/freshness>`.
+
+
+.. _configuration/configmain-advanced#additional_freshness_latency:
+
+Additional Freshness Threshold Latency Option (Not implemented) 
+----------------------------------------------------------------
+
+Format:
+
+::
+
+  additional_freshness_latency=<#>
+
+Example:
+
+::
+
+  additional_freshness_latency=15
+  
+This option determines the number of seconds Shinken will add to any host or services freshness threshold it automatically calculates (e.g. those not specified explicitly by the user). More information on freshness checking can be found :ref:`here <advanced/freshness>`.
+
+
+
+.. _configuration/configmain-advanced#human_timestamp_log:
+
+Human format for log timestamp
+-------------------------------
+
+Say if the timespam should be a unixtime (default) or a human read one.
+
+Format
+
+::
+
+  human_timestamp_log=[0/1]
+
+Example
+
+::
+
+  human_timestamp_log=0
+
+
+This directive is used to specify if the timespam before the log entry should be in unixtime (like [1302874960]) which is the default, or a human readable one (like [Fri Apr 15 15:43:19 2011]).
+
+Beware : if you set the human format, some automatic parsing log tools won't work!
+
+
+.. _configuration/configmain-advanced#resource_file:
+
+Resource File
+--------------
+
+Defined in shinken.cfg file.
+
+Format
+
+::
+
+   resource_file=<file_name>
+
+Example:
+
+::
+
+  resource_file=/etc/shinken/resource.cfg
+
+This is used to specify an optional resource file that can contain "$USERn$" :ref:`Understanding Macros and How They Work <thebasics/macros>` definitions. "$USERn$" macros are useful for storing usernames, passwords, and items commonly used in command definitions (like directory paths).
+A classical variable used is $USER1$, used to store the plugins path, "/usr/lib/nagios/plugins" on a classic installation.
+
+
+.. _configuration/configmain-advanced#triggers_dir:
+
+Triggers directory
+-------------------
+
+Format
+
+::
+
+  triggers_dir=<directory>
+
+Example:
+
+::
+
+   triggers_dir=triggers.d
+
+Used to specify the :ref:`trigger <advanced/triggers>` directory. It will open the directory and look recursively for .trig files.
+
+
+
+.. _configuration/configmain-advanced#idontcareaboutsecurity:
+
+Bypass security checks for the Arbiter daemon
+----------------------------------------------
+
+Defined in brokerd.ini, brokerd-windows.ini, pollerd.ini, pollerd-windows.ini, reactionnerd.ini, schedulerd.ini and schedulerd-windows.ini.
+
+Format:
+
+::
+
+  idontcareaboutsecurity=<0/1>
+
+Example:
+
+::
+
+  idontcareaboutsecurity=0
+
+This option determines whether or not Shinken will allow the Arbiter daemon to run under the root account.
+If this option is disabled, Shinken will bailout if the :ref:`nagios_user <configuration/configmain#shinken_user>` or the :ref:`nagios_group <configuration/configmain#shinken_group>` is configured with the root account.
+
+The Shinken daemons do not need root right. Without a good reason do not run thems under this account!
+  * 0 = Be a responsible administrator
+  * 1 = Make crazy your security manager
+
+
+.. _configuration/configmain-advanced#enable_notifications:
+
+Notifications Option
+---------------------
+
+Format:
+
+::
+
+  enable_notifications=<0/1>
+
+Example:
+
+::
+
+  enable_notifications=1
+
+This option determines whether or not Shinken will send out :ref:`notifications <thebasics/notifications>`. If this option is disabled, Shinken will not send out notifications for any host or service.
+
+Values are as follows:
+  * 0 = Disable notifications
+  * 1 = Enable notifications (default)
+
+
+.. _configuration/configmain-advanced#log_rotation_method:
+
+Log Rotation Method (Not fully implemented)
+--------------------------------------------
+
+Format:
+
+::
+
+  log_rotation_method=<n/h/d/w/m>
+
+Example:
+
+::
+
+  log_rotation_method=d
+
+This is the rotation method that you would like Shinken to use for your log file on the **broker server**. Values are as follows:
+
+  * n = None (don't rotate the log - this is the default)
+  * h = Hourly (rotate the log at the top of each hour)
+  * d = Daily (rotate the log at midnight each day)
+  * w = Weekly (rotate the log at midnight on Saturday)
+  * m = Monthly (rotate the log at midnight on the last day of the month)
+
+.. tip::  From now, only the d (Daily) parameter is managed.
+
+
+.. _configuration/configmain-advanced#check_external_commands:
+
+External Command Check Option
+------------------------------
+
+Format:
+
+::
+
+  check_external_commands=<0/1>
+
+Example:
+
+::
+
+  check_external_commands=1
+
+This option determines whether or not Shinken will check the :ref:`External Command File <configuration/configmain-advanced#command_file>` for commands that should be executed with the **arbiter daemon**. More information on external commands can be found :ref:`here <advanced/extcommands>`.
+
+  * 0 = Don't check external commands (default)
+  * 1 = Check external commands (default)
+
+.. note::  FIX ME : Find the real default value
+
+
+.. _configuration/configmain-advanced#command_file:
+
+External Command File
+----------------------
+
+Defined in nagios.cfg file.
+
+Format:
+
+::
+
+  command_file=<file_name>
+
+Example:
+
+::
+
+  command_file=/var/lib/shinken/rw/nagios.cmd
+
+This is the file that Shinken will check for external commands to process with the **arbiter daemon**. The :ref:`command CGI <thebasics/cgis#cmd_cgi>` writes commands to this file. The external command file is implemented as a named pipe (FIFO), which is created when Nagios starts and removed when it shuts down. More information on external commands can be found :ref:`here <advanced/extcommands>`.
+
+.. todo: where is thebasics/cgis#cmd-cgi (thebasics-cgis#thebasics-cgis-cmd_cgi-)?
+
+.. tip::  This external command file is not managed under Windows system. Please use others way to send commands like the LiveStatus module for example.
+
+
+
+.. _configuration/configmain-advanced#retain_state_information:
+
+State Retention Option (Not implemented)
+-----------------------------------------
+
+Format:
+
+::
+
+  retain_state_information=<0/1>
+
+Example:
+
+::
+
+  retain_state_information=1
+
+This option determines whether or not Shinken will retain state information for hosts and services between program restarts. If you enable this option, you should supply a value for the :ref:`State Retention File <configuration/configmain-advanced#state_retention_file>` variable. When enabled, Shinken will save all state information for hosts and service before it shuts down (or restarts) and will read in previously saved state information when it starts up again.
+  * 0 = Don't retain state information
+  * 1 = Retain state information (default)
+
+.. note::  Idea to approve : Mark it as Unused : `Related topic`_. A Shinken module replace it.
+
+
+.. _configuration/configmain-advanced#state_retention_file:
+
+State Retention File
+---------------------
+
+Format:
+
+::
+
+  state_retention_file=<file_name>
+
+Example:
+
+::
+
+  state_retention_file=/var/lib/shinken/retention.dat
+
+This is the file that Shinken **scheduler daemons** will use for storing status, downtime, and comment information before they shuts down. When Shinken is restarted it will use the information stored in this file for setting the initial states of services and hosts before it starts monitoring anything. In order to make Shinken retain state information between program restarts, you must enable the :ref:`State Retention Option <configuration/configmain-advanced#retain_state_information>` option.
+
+.. important::  The file format is not the same between Shinken and Nagios! The retention.dat generated with Nagios will not load into Shinken.
+
+
+
+
+Scheduling parameters
+======================
+
+.. _configuration/configmain-advanced#execute_service_checks:
+
+Service/Host Check Execution Option
+------------------------------------
+
+Format:
+
+::
+
+  execute_service_checks=<0/1>
+  execute_host_checks=<0/1>
+
+Example:
+
+::
+
+  execute_service_checks=1
+  execute_host_checks=1
+
+This option determines whether or not Shinken will execute service/host checks. Do not change this option unless you use a old school distributed architecture. And even if you do this, please change your architecture with a cool new one far more efficient.
+
+  * 0 = Don't execute service checks
+  * 1 = Execute service checks (default)
+
+
+.. _configuration/configmain-advanced#accept_passive_service_checks:
+
+Passive Service/Host Check Acceptance Option
+---------------------------------------------
+
+Format:
+
+::
+
+  accept_passive_service_checks=<0/1>
+  accept_passive_host_checks=<0/1>
+
+Example:
+
+::
+
+  accept_passive_service_checks=1
+  accept_passive_host_checks=1
+
+This option determines whether or not Shinken will accept :ref:`passive service/host checks <thebasics/passivechecks>`. If this option is disabled, Nagios will not accept any passive service/host checks.
+
+  * 0 = Don't accept passive service/host checks
+  * 1 = Accept passive service/host checks (default)
+
+
+.. _configuration/configmain-advanced#enable_event_handlers:
+
+Event Handler Option
+---------------------
+
+Format:
+
+::
+
+  enable_event_handlers=<0/1>
+
+Example:
+
+::
+
+  enable_event_handlers=1
+
+This option determines whether or not Shinken will run :ref:`event handlers <advanced/eventhandlers>`.
+
+  * 0 = Disable event handlers
+  * 1 = Enable event handlers (default)
+
+
+
+
+.. _configuration/configmain-advanced#use_syslog:
+
+Syslog Logging Option
+----------------------
+
+Format:
+
+::
+
+  use_syslog=<0/1>
+
+Example:
+
+::
+
+  use_syslog=1
+
+This variable determines whether messages are logged to the syslog facility on your local host. Values are as follows:
+
+  * 0 = Don't use syslog facility
+  * 1 = Use syslog facility
+
+.. tip::  This is a Unix Os only option.
+
+
+.. _configuration/configmain-advanced#log_notifications:
+
+Notification Logging Option
+----------------------------
+
+Format:
+
+::
+
+  log_notifications=<0/1>
+
+Example:
+
+::
+
+  log_notifications=1
+
+This variable determines whether or not notification messages are logged. If you have a lot of contacts or regular service failures your log file will grow (let say some Mo by day for a huge configuration, so it's quite OK for nearly every one to log them). Use this option to keep contact notifications from being logged.
+
+  * 0 = Don't log notifications
+  * 1 = Log notifications
+
+
+.. _configuration/configmain-advanced#log_service_retries:
+.. _configuration/configmain-advanced#log_host_retries:
+
+Service/Host Check Retry Logging Option (Not implemented)
+----------------------------------------------------------
+
+Format:
+
+::
+
+  log_service_retries=<0/1>
+  log_host_retries=<0/1>
+
+Example:
+
+::
+
+  log_service_retries=0
+  log_host_retries=0
+
+This variable determines whether or not service/host check retries are logged. Service check retries occur when a service check results in a non-OK state, but you have configured Shinken to retry the service more than once before responding to the error. Services in this situation are considered to be in "soft" states. Logging service check retries is mostly useful when attempting to debug Shinken or test out service/host :ref:`event handlers <advanced/eventhandlers>`.
+
+  * 0 = Don't log service/host check retries (default)
+  * 1 = Log service/host check retries
+
+
+.. _configuration/configmain-advanced#log_event_handlers:
+
+Event Handler Logging Option
+-----------------------------
+
+Format:
+
+::
+
+  log_event_handlers=<0/1>
+
+Example:
+
+::
+
+  log_event_handlers=1
+
+This variable determines whether or not service and host :ref:`event handlers <advanced/eventhandlers>` are logged. Event handlers are optional commands that can be run whenever a service or hosts changes state. Logging event handlers is most useful when debugging Shinken or first trying out your event handler scripts.
+
+  * 0 = Don't log event handlers
+  * 1 = Log event handlers
+
+
+
+
+.. _configuration/configmain-advanced#log_external_commands:
+
+External Command Logging Option
+--------------------------------
+
+Format:
+
+::
+
+  log_external_commands=<0/1>
+
+Example:
+
+::
+
+  log_external_commands=1
+
+This variable determines whether or not Shinken will log :ref:`external commands <advanced/extcommands>` that it receives.
+
+  * 0 = Don't log external commands
+  * 1 = Log external commands (default)
+
+
+.. _configuration/configmain-advanced#log_passive_checks:
+
+Passive Check Logging Option (Not implemented)
+-----------------------------------------------
+
+Format:
+
+::
+
+  log_passive_checks=<0/1>
+
+Example:
+
+::
+
+  log_passive_checks=1
+
+This variable determines whether or not Shinken will log :ref:`passive host and service checks <thebasics/passivechecks>` that it receives from the :ref:`external command file <configuration/configmain-advanced#command_file>`.
+
+  * 0 = Don't log passive checks
+  * 1 = Log passive checks (default)
+
+
+.. _configuration/configmain-advanced#global_host_event_handler:
+.. _configuration/configmain-advanced#global_service_event_handler:
+
+Global Host/Service Event Handler Option (Not implemented)
+-----------------------------------------------------------
+
+Format:
+
+::
+
+  global_host_event_handler=<configobjects/command>
+  global_service_event_handler=<configobjects/command>
+
+Example:
+
+::
+
+  global_host_event_handler=log-host-event-to-db
+  global_service_event_handler=log-service-event-to-db
+
+This option allows you to specify a host event handler command that is to be run for every host state change. The global event handler is executed immediately prior to the event handler that you have optionally specified in each host definition. The command argument is the short name of a command that you define in your :ref:`Object Configuration Overview <configuration/configobject>`. The maximum amount of time that this command can run is controlled by the :ref:`Event Handler Timeout <configuration/configmain-advanced#event_handler_timeout>` option. More information on event handlers can be found :ref:`here <advanced/eventhandlers>`.
+
+Such commands should not be so useful with the new Shinken distributed architecture. If you use it, look if you can avoid it because such commands will kill your performances.
+
+
+
+.. _configuration/configmain-advanced#interval_length:
+
+Timing Interval Length
+-----------------------
+
+Format:
+
+::
+
+  interval_length=<seconds>
+
+Example:
+
+::
+
+  interval_length=60
+
+This is the number of seconds per “unit interval" used for timing in the scheduling queue, re-notifications, etc. "Units intervals" are used in the object configuration file to determine how often to run a service check, how often to re-notify a contact, etc.
+
+The default value for this is set to 60, which means that a "unit value" of 1 in the object configuration file will mean 60 seconds (1 minute).
+
+.. tip::  Set this option top 1 is not a good thing with Shinken. It's not design to be a hard real time (<5seconds) monitoring system. Nearly no one need such hard real time (maybe only the Nuclear center or a market place like the London Exchange...).
+
+
+
+Old CGI related parameter
+==========================
+
+If you are using the old CGI from Nagios, please migrate to a new WebUI. For historical perspective you can find information on the :ref:`specific CGI parameters <integration/specific-cgi-parameters>`.
+
+
+Unused parameters
+==================
+
+The below parameters are inherited from Nagios but are not used in Shinken. You can defined them but if you don't it will be the same :)
+
+They are listed on another page :ref:`unused Nagios parameters <advanced/unused-nagios-parameters>`.
+
+
+
+All the others :) 
+==================
+
+
+.. _configuration/configmain-advanced#date_format:
+
+Date Format (Not implemented) 
+------------------------------
+
+Format:
+
+::
+
+  date_format=<option>
+
+Example:
+
+::
+
+  date_format=us
+  
+This option allows you to specify what kind of date/time format Shinken should use in date/time :ref:`macros <thebasics/macros>`. Possible options (along with example output) include:
+
+============== =================== ===================
+Option         Output Format       Sample Output      
+us             MM/DD/YYYY HH:MM:SS 06/30/2002 03:15:00
+euro           DD/MM/YYYY HH:MM:SS 30/06/2002 03:15:00
+iso8601        YYYY-MM-DD HH:MM:SS 2002-06-30 03:15:00
+strict-iso8601 YYYY-MM-DDTHH:MM:SS 2002-06-30T03:15:00
+============== =================== ===================
+
+
+
+
+.. _configuration/configmain-advanced#illegal_object_name_chars:
+
+Illegal Object Name Characters 
+-------------------------------
+
+Format:
+
+::
+
+  illegal_object_name_chars=<chars...>
+
+Example:
+
+::
+
+  illegal_object_name_chars=`-!$%^&*"|'<>?,()=
+  
+This option allows you to specify illegal characters that cannot be used in host names, service descriptions, or names of other object types. Shinken will allow you to use most characters in object definitions, but I recommend not using the characters shown in the example above. Doing may give you problems in the web interface, notification commands, etc.
+
+
+.. _configuration/configmain-advanced#illegal_macro_output_chars:
+
+Illegal Macro Output Characters 
+--------------------------------
+
+Format:
+
+::
+
+  illegal_macro_output_chars=<chars...>
+
+Example:
+
+::
+
+  illegal_macro_output_chars=`-$^&"|'<>
+  
+This option allows you to specify illegal characters that should be stripped from :ref:`macros <thebasics/macros>` before being used in notifications, event handlers, and other commands. This DOES NOT affect macros used in service or host check commands. You can choose to not strip out the characters shown in the example above, but I recommend you do not do this. Some of these characters are interpreted by the shell (i.e. the backtick) and can lead to security problems. The following macros are stripped of the characters you specify:
+
+  * "$HOSTOUTPUT$"
+  * "$HOSTPERFDATA$"
+  * "$HOSTACKAUTHOR$"
+  * "$HOSTACKCOMMENT$"
+  * "$SERVICEOUTPUT$"
+  * "$SERVICEPERFDATA$"
+  * "$SERVICEACKAUTHOR$"
+  * "$SERVICEACKCOMMENT$"
+
+  
+.. _configuration/configmain-advanced#use_regexp_matching:
+
+Regular Expression Matching Option (Not implemented) 
+-----------------------------------------------------
+
+Format:
+
+::
+
+  use_regexp_matching=<0/1>
+
+Example:
+
+::
+
+  use_regexp_matching=0
+  
+This option determines whether or not various directives in your :ref:`Object Configuration Overview <configuration/configobject>` will be processed as regular expressions. More information on how this works can be found :ref:`here <advanced/objecttricks>`.
+
+  * 0 = Don't use regular expression matching (default)
+  * 1 = Use regular expression matching
+
+
+.. _configuration/configmain-advanced#use_true_regexp_matching:
+
+True Regular Expression Matching Option (Not implemented) 
+----------------------------------------------------------
+
+Format:
+
+::
+
+  use_true_regexp_matching=<0/1>
+
+Example:
+
+::
+
+  use_true_regexp_matching=0
+  
+If you've enabled regular expression matching of various object directives using the :ref:`Regular Expression Matching Option <configuration/configmain-advanced#use_regexp_matching>` option, this option will determine when object directives are treated as regular expressions. If this option is disabled (the default), directives will only be treated as regular expressions if they contain \*, ?, +, or \.. If this option is enabled, all appropriate directives will be treated as regular expression _ be careful when enabling this! More information on how this works can be found :ref:`here <advanced/objecttricks>`.
+
+  * 0 = Don't use true regular expression matching (default)
+  * 1 = Use true regular expression matching
+
+
+.. _configuration/configmain-advanced#admin_email:
+
+Administrator Email Address (unused) 
+-------------------------------------
+
+Format:
+
+::
+
+  admin_email=<email_address>
+
+Example:
+
+::
+
+  admin_email=root@localhost.localdomain
+  
+This is the email address for the administrator of the local machine (i.e. the one that Shinken is running on). This value can be used in notification commands by using the "$ADMINEMAIL$" :ref:`macro <thebasics/macros>`.
+
+
+.. _configuration/configmain-advanced#admin_pager:
+
+Administrator Pager (unused) 
+-----------------------------
+
+Format:
+
+::
+
+  admin_pager=<pager_number_or_pager_email_gateway>
+
+Example:
+
+::
+
+  admin_pager=pageroot@localhost.localdomain
+  
+This is the pager number (or pager email gateway) for the administrator of the local machine (i.e. the one that Shinken is running on). The pager number/address can be used in notification commands by using the $ADMINPAGER$ :ref:`macro <thebasics/macros>`.
+
+
+
+
+.. _Related topic: http://www.shinken-monitoring.org/forum/index.php/topic,21.0.html
diff --git a/doc/source/07_advanced/triggers.rst b/doc/source/07_advanced/triggers.rst
new file mode 100644
index 0000000..8ea2b06
--- /dev/null
+++ b/doc/source/07_advanced/triggers.rst
@@ -0,0 +1,53 @@
+.. _advanced/triggers:
+
+========
+Triggers
+========
+
+.. warning::  This is currently in Beta. DO NOT use in production. 
+
+
+Define and use triggers
+************************
+
+A trigger object is something that can be called after a "change" on an object. It's a bit like Zabbix trigger, and should be used only if you need it. In most cases, direct check is easier to setup :)
+
+Here is an example that will raise a critical check if the CPU is too loaded:
+
+.. note:: If your trigger is made to edit output add the trigger_broker_raise_enabled parameter into the service definition.
+          If not, Shinken will generate 2 broks (1 before and 1 after the trigger). This can lead to bad data in broker module (Graphite)
+
+::
+  
+  define service{
+        use                             local-service         ; Name of service template to use
+        host_name                       localhost
+        service_description             Current Load trigger
+        check_command                   check_local_load!5.0,4.0,3.0!10.0,6.0,4.0
+        trigger_name                    simple_cpu
+        trigger_broker_raise_enabled    1
+        }
+  
+  
+Then define your trigger in etc/trigger.d/yourtrigger.trig. here the file is simple_cpu.trig
+
+::
+
+  
+  try:
+
+    load = perf(self, 'load1')
+    print "Founded load", load
+    if load >= 10:
+        critical(self, 'CRITICAL | load=%d' % load)
+    elif load >= 5:
+        warning(self, 'WARNING | load=%d' % load)
+    else:
+        ok(self, 'OK | load=%d' % load)
+  except:
+  
+    unknown(self, 'UNKNOWN | load=%d' % load)
+  
+  
+Finally, add the triggers_dir=trigger.d statement to your shinken.cfg
+
diff --git a/doc/source/08_configobjects/host.rst b/doc/source/08_configobjects/host.rst
index 19fec9a..1d8b2f7 100644
--- a/doc/source/08_configobjects/host.rst
+++ b/doc/source/08_configobjects/host.rst
@@ -10,75 +10,82 @@ Host Definition
 
 Description 
 ============
-
-
-A host definition is used to define a physical server, workstation, device, etc. that resides on your network.
-
-
-
-Definition Format 
+=======
+Definition Format
 ==================
 
-
 Bold directives are required, while the others are optional.
 
 
-
-============================ ======================================
-define host{                                                       
-**host_name**                ***host_name***                       
-**alias**                    ***alias***                           
-display_name                 *display_name*                        
-**address**                  ***address***                         
-parents                      *host_names*                          
-hostgroups                   *hostgroup_names*                     
-check_command                *command_name*                        
-initial_state                [o,d,u]                               
-**max_check_attempts**       **#**                                 
-check_interval               #                                     
-retry_interval               #                                     
-active_checks_enabled        [0/1]                                 
-passive_checks_enabled       [0/1]                                 
-**check_period**             ***timeperiod_name***                 
-obsess_over_host             [0/1]                                 
-check_freshness              [0/1]                                 
-freshness_threshold          #                                     
-event_handler                *command_name*                        
-event_handler_enabled        [0/1]                                 
-low_flap_threshold           #                                     
-high_flap_threshold          #                                     
-flap_detection_enabled       [0/1]                                 
-flap_detection_options       [o,d,u]                               
-process_perf_data            [0/1]                                 
-retain_status_information    [0/1]                                 
-retain_nonstatus_information [0/1]                                 
-**contacts**                 ***contacts***                        
-**contact_groups**           ***contact_groups***                  
-**notification_interval**    **#**                                 
-first_notification_delay     #                                     
-**notification_period**      ***timeperiod_name***                 
-notification_options         [d,u,r,f,s]                           
-notifications_enabled        [0/1]                                 
-stalking_options             [o,d,u]                               
-notes                        *note_string*                         
-notes_url                    *url*                                 
-action_url                   *url*                                 
-icon_image                   *image_file*                          
-icon_image_alt               *alt_string*                          
-vrml_image                   *image_file*                          
-statusmap_image              *image_file*                          
-2d_coords                    *x_coord,y_coord*                     
-3d_coords                    *x_coord,y_coord,z_coord*             
-realm                        *realm*                               
-poller_tag                   *poller_tag*                          
-business_impact              [0/1/2/3/4/5]                         
-resultmodulations            *resultmodulations*                   
-escalations                  *escalations names*                   
-business_impact_modulations  *business_impact_modulations names*   
-icon_set                     [database/disk/network_service/server]
-maintenance_period           *timeperiod_name*                     
-}                                                                  
-============================ ======================================
+========================================== ======================================
+define host{
+**host_name**                              ***host_name***
+**alias**                                  ***alias***
+display_name                               *display_name*
+**address**                                ***address***
+parents                                    *host_names*
+hostgroups                                 *hostgroup_names*
+check_command                              *command_name*
+initial_state                              [o,d,u]
+**max_check_attempts**                     **#**
+check_interval                             #
+retry_interval                             #
+active_checks_enabled                      [0/1]
+passive_checks_enabled                     [0/1]
+**check_period**                           ***timeperiod_name***
+obsess_over_host                           [0/1]
+check_freshness                            [0/1]
+freshness_threshold                        #
+event_handler                              *command_name*
+event_handler_enabled                      [0/1]
+low_flap_threshold                         #
+high_flap_threshold                        #
+flap_detection_enabled                     [0/1]
+flap_detection_options                     [o,d,u]
+process_perf_data                          [0/1]
+retain_status_information                  [0/1]
+retain_nonstatus_information               [0/1]
+**contacts**                               ***contacts***
+**contact_groups**                         ***contact_groups***
+**notification_interval**                  **#**
+first_notification_delay                   #
+**notification_period**                    ***timeperiod_name***
+notification_options                       [d,u,r,f,s]
+notifications_enabled                      [0/1]
+stalking_options                           [o,d,u]
+notes                                      *note_string*
+notes_url                                  *url*
+action_url                                 *url*
+icon_image                                 *image_file*
+icon_image_alt                             *alt_string*
+vrml_image                                 *image_file*
+statusmap_image                            *image_file*
+2d_coords                                  *x_coord,y_coord*
+3d_coords                                  *x_coord,y_coord,z_coord*
+realm                                      *realm*
+poller_tag                                 *poller_tag*
+business_impact                            [0/1/2/3/4/5]
+resultmodulations                          *resultmodulations*
+escalations                                *escalations names*
+business_impact_modulations                *business_impact_modulations names*
+icon_set                                   [database/disk/network_service/server]
+maintenance_period                         *timeperiod_name*
+service_overrides                          *service_description,directive value*
+service_excludes                           *service_description,...*
+labels                                     *labels*
+business_rule_output_template              *template*
+business_rule_smart_notifications          [0/1]
+business_rule_downtime_as_ack              [0/1]
+business_rule_host_notification_options    [d,u,r,f,s]
+business_rule_service_notification_options [w,u,c,r,f,s]
+trigger_name                               *trigger_name*
+trigger_broker_raise_enabled               [0/1]
+}
+========================================== ======================================
+
+
+Example Definition
+===================
 
 
 
@@ -333,5 +340,14 @@ This variable is used to set the icon in the Shinken Webui. For now, values are
   
 Shinken-specific variable to specify a recurring downtime period. This works like a scheduled downtime, so unlike a check_period with exclusions, checks will still be made (no ":ref:`blackout <thebasics-timeperiods#how_time_periods_work_with_host_and_service_checks>`" times). `announcement`_
 
+trigger_name
+  This options define the trigger that will be executed after a check result (passive or active).
+  This file *trigger_name*.trig has to exist in the :ref:`trigger directory <configuration/configmain-advanced#triggers_dir>` or sub-directories.
+
+trigger_broker_raise_enabled
+  This option define the behavior of the defined trigger (Default 0). If set to 1, this means the trigger will modify the output / return code of the check.
+  If 0, this means the code executed by the trigger does nothing to the check (compute something elsewhere ?)
+  Basically, if you use one of the predefined function (trigger_functions.py) set it to 1
+
 .. _announcement: http://www.mail-archive.com/shinken-devel@lists.sourceforge.net/msg00247.html
 .. _gd library: http://www.boutell.com/gd/
diff --git a/doc/source/08_configobjects/service.rst b/doc/source/08_configobjects/service.rst
index d78dfdb..b210bef 100644
--- a/doc/source/08_configobjects/service.rst
+++ b/doc/source/08_configobjects/service.rst
@@ -16,64 +16,67 @@ Description
 
 A service definition is used to identify a “service" that runs on a host. The term “service" is used very loosely. It can mean an actual service that runs on the host (POP, "SMTP", "HTTP", etc.) or some other type of metric associated with the host (response to a ping, number of logged in users, free disk space, etc.). The different arguments to a service definition are outlined below.
 
-
-
-Definition Format 
-==================
-
-
-Bold directives are required, while the others are optional.
-
-
-
-============================ ======================================
-define service{                                                    
-**host_name**                ***host_name***                       
-hostgroup_name               *hostgroup_name*                      
-**service_description**      ***service_description***             
-display_name                 *display_name*                        
-servicegroups                servicegroup_names                    
-is_volatile                  [0/1]                                 
-**check_command**            ***command_name***                    
-initial_state                [o,w,u,c]                             
-**max_check_attempts**       **#**                                 
-**check_interval**           **#**                                 
-**retry_interval**           **#**                                 
-active_checks_enabled        [0/1]                                 
-passive_checks_enabled       [0/1]                                 
-**check_period**             ***timeperiod_name***                 
-obsess_over_service          [0/1]                                 
-check_freshness              [0/1]                                 
-freshness_threshold          #                                     
-event_handler                *command_name*                        
-event_handler_enabled        [0/1]                                 
-low_flap_threshold           #                                     
-high_flap_threshold          #                                     
-flap_detection_enabled       [0/1]                                 
-flap_detection_options       [o,w,c,u]                             
-process_perf_data            [0/1]                                 
-retain_status_information    [0/1]                                 
-retain_nonstatus_information [0/1]                                 
-**notification_interval**    **#**                                 
-first_notification_delay     #                                     
-**notification_period**      ***timeperiod_name***                 
-notification_options         [w,u,c,r,f,s]                         
-notifications_enabled        [0/1]                                 
-**contacts**                 ***contacts***                        
-**contact_groups**           ***contact_groups***                  
-stalking_options             [o,w,u,c]                             
-notes                        *note_string*                         
-notes_url                    *url*                                 
-action_url                   *url*                                 
-icon_image                   *image_file*                          
-icon_image_alt               *alt_string*                          
-poller_tag                   *poller_tag*                          
-service_dependencies         *host,service_description*            
-business_impact              [0/1/2/3/4/5]                         
-icon_set                     [database/disk/network_service/server]
-maintenance_period           *timeperiod_name*                     
-}                                                                  
-============================ ======================================
+=======
+========================================== ======================================
+define service{
+**host_name**                              ***host_name***
+hostgroup_name                             *hostgroup_name*
+**service_description**                    ***service_description***
+display_name                               *display_name*
+servicegroups                              servicegroup_names
+is_volatile                                [0/1]
+**check_command**                          ***command_name***
+initial_state                              [o,w,u,c]
+**max_check_attempts**                     **#**
+**check_interval**                         **#**
+**retry_interval**                         **#**
+active_checks_enabled                      [0/1]
+passive_checks_enabled                     [0/1]
+**check_period**                           ***timeperiod_name***
+obsess_over_service                        [0/1]
+check_freshness                            [0/1]
+freshness_threshold                        #
+event_handler                              *command_name*
+event_handler_enabled                      [0/1]
+low_flap_threshold                         #
+high_flap_threshold                        #
+flap_detection_enabled                     [0/1]
+flap_detection_options                     [o,w,c,u]
+process_perf_data                          [0/1]
+retain_status_information                  [0/1]
+retain_nonstatus_information               [0/1]
+**notification_interval**                  **#**
+first_notification_delay                   #
+**notification_period**                    ***timeperiod_name***
+notification_options                       [w,u,c,r,f,s]
+notifications_enabled                      [0/1]
+**contacts**                               ***contacts***
+**contact_groups**                         ***contact_groups***
+stalking_options                           [o,w,u,c]
+notes                                      *note_string*
+notes_url                                  *url*
+action_url                                 *url*
+icon_image                                 *image_file*
+icon_image_alt                             *alt_string*
+poller_tag                                 *poller_tag*
+service_dependencies                       *host,service_description*
+business_impact                            [0/1/2/3/4/5]
+icon_set                                   [database/disk/network_service/server]
+maintenance_period                         *timeperiod_name*
+labels                                     *labels*
+business_rule_output_template              *template*
+business_rule_smart_notifications          [0/1]
+business_rule_downtime_as_ack              [0/1]
+business_rule_host_notification_options    [d,u,r,f,s]
+business_rule_service_notification_options [w,u,c,r,f,s]
+trigger_name                               *trigger_name*
+trigger_broker_raise_enabled               [0/1]
+}
+========================================== ======================================
+
+
+Example Definition
+===================
 
 
 
@@ -376,4 +379,13 @@ This variable is used to set the icon in the Shinken Webui. For now, values are
   
 Shinken-specific variable to specify a recurring downtime period. This works like a scheduled downtime, so unlike a check_period with exclusions, checks will still be made (no ":ref:`blackout <official/thebasics-timeperiods#how_time_periods_work_with_host_and_service_checks>`" times). `announcement`_
 
+trigger_name
+  This options define the trigger that will be executed after a check result (passive or active).
+  This file *trigger_name*.trig has to exist in the :ref:`trigger directory <configuration/configmain-advanced#triggers_dir>` or sub-directories.
+
+trigger_broker_raise_enabled
+  This option define the behavior of the defined trigger (Default 0). If set to 1, this means the trigger will modify the output / return code of the check.
+  If 0, this means the code executed by the trigger does nothing to the check (compute something elsewhere ?)
+  Basically, if you use one of the predefined function (trigger_functions.py) set it to 1
+
 .. _announcement: http://www.mail-archive.com/shinken-devel@lists.sourceforge.net/msg00247.html
diff --git a/setup.py b/setup.py
index fba8513..4e16bb5 100644
--- a/setup.py
+++ b/setup.py
@@ -587,7 +587,7 @@ if __name__ == "__main__":
         },
 
         name="Shinken",
-        version="1.4.1",
+        version="1.4.3",
         packages=find_packages(),
         package_data={'': package_data},
         description="Shinken is a monitoring tool compatible with Nagios configuration and plugins",
diff --git a/shinken/bin.py b/shinken/bin.py
index 66ed8f9..d2cc82d 100644
--- a/shinken/bin.py
+++ b/shinken/bin.py
@@ -31,7 +31,7 @@ Shinken.
 
 import sys
 
-VERSION = "1.4.1"
+VERSION = "1.4.3"
 
 
 # Make sure people are using Python 2.4 or higher
diff --git a/shinken/modules/graphite_broker.py b/shinken/modules/graphite_broker.py
index f1f4a33..fe12fcd 100644
--- a/shinken/modules/graphite_broker.py
+++ b/shinken/modules/graphite_broker.py
@@ -245,16 +245,14 @@ class Graphite_broker(BaseModule):
         if self.use_pickle:
             # Buffer the performance data lines
             for (metric, value) in couples:
-                if value:
-                    self.buffer.append(("%s.__HOST__.%s" % (path, metric),
+                self.buffer.append(("%s.__HOST__.%s" % (path, metric),
                                        ("%d" % check_time,
                                         "%s" % value)))
         else:
             lines = []
             # Send a bulk of all metrics at once
             for (metric, value) in couples:
-                if value:
-                    lines.append("%s.__HOST__.%s %s %d" % (path, metric,
+                lines.append("%s.__HOST__.%s %s %d" % (path, metric,
                                                            value, check_time))
             packet = '\n'.join(lines) + '\n'  # Be sure we put \n every where
             try:
diff --git a/shinken/objects/host.py b/shinken/objects/host.py
index 80476b5..c97ff6f 100644
--- a/shinken/objects/host.py
+++ b/shinken/objects/host.py
@@ -132,6 +132,7 @@ class Host(SchedulingItem):
         # Load some triggers
         'trigger':         StringProp(default=''),
         'trigger_name':    ListProp(default=''),
+        'trigger_broker_raise_enabled': BoolProp(default='0'),
 
         # Trending
         'trending_policies':    ListProp(default='', fill_brok=['full_status']),
@@ -153,6 +154,7 @@ class Host(SchedulingItem):
         'last_chk':             IntegerProp(default=0, fill_brok=['full_status', 'check_result'], retention=True),
         'next_chk':             IntegerProp(default=0, fill_brok=['full_status', 'next_schedule'], retention=True),
         'in_checking':          BoolProp(default=False, fill_brok=['full_status', 'check_result', 'next_schedule']),
+        'in_maintenance':       IntegerProp(default=None, fill_brok=['full_status'], retention=True),
         'latency':              FloatProp(default=0, fill_brok=['full_status', 'check_result'], retention=True),
         'attempt':              IntegerProp(default=0, fill_brok=['full_status', 'check_result'], retention=True),
         'state':                StringProp(default='PENDING', fill_brok=['full_status', 'check_result'], retention=True),
diff --git a/shinken/objects/item.py b/shinken/objects/item.py
index 029c850..e985d98 100644
--- a/shinken/objects/item.py
+++ b/shinken/objects/item.py
@@ -611,6 +611,7 @@ Like temporary attributes such as "imported_from", etc.. """
         for tname in self.triggers:
             t = triggers.find_by_name(tname)
             if t:
+                setattr(t, 'trigger_broker_raise_enabled', self.trigger_broker_raise_enabled)
                 new_triggers.append(t)
             else:
                 self.configuration_errors.append('the %s %s does have a unknown trigger_name "%s"' % (self.__class__.my_type, self.get_full_name(), tname))
diff --git a/shinken/objects/schedulingitem.py b/shinken/objects/schedulingitem.py
index 492f691..d6f34a7 100644
--- a/shinken/objects/schedulingitem.py
+++ b/shinken/objects/schedulingitem.py
@@ -998,8 +998,9 @@ class SchedulingItem(Item):
         # do not raise a new one
         if not c.from_trigger:
             self.eval_triggers()
+        if c.from_trigger or not c.from_trigger and len([t for t in self.triggers if t.trigger_broker_raise_enabled]) == 0 :
+            self.broks.append(self.get_check_result_brok())
 
-        self.broks.append(self.get_check_result_brok())
         self.get_obsessive_compulsive_processor_command()
         self.get_perfdata_command()
 
diff --git a/shinken/objects/service.py b/shinken/objects/service.py
index 8f49a9d..f90d069 100644
--- a/shinken/objects/service.py
+++ b/shinken/objects/service.py
@@ -134,6 +134,7 @@ class Service(SchedulingItem):
         # Load some triggers
         'trigger':         StringProp(default=''),
         'trigger_name':    ListProp(default=''),
+        'trigger_broker_raise_enabled': BoolProp(default='0'),
 
         # Trending
         'trending_policies':    ListProp(default='', fill_brok=['full_status']),
@@ -156,6 +157,7 @@ class Service(SchedulingItem):
         'last_chk':           IntegerProp(default=0, fill_brok=['full_status', 'check_result'], retention=True),
         'next_chk':           IntegerProp(default=0, fill_brok=['full_status', 'next_schedule'], retention=True),
         'in_checking':        BoolProp(default=False, fill_brok=['full_status', 'check_result', 'next_schedule'], retention=True),
+        'in_maintenance':     IntegerProp(default=None, fill_brok=['full_status'], retention=True),
         'latency':            FloatProp(default=0, fill_brok=['full_status', 'check_result'], retention=True,),
         'attempt':            IntegerProp(default=0, fill_brok=['full_status', 'check_result'], retention=True),
         'state':              StringProp(default='PENDING', fill_brok=['full_status', 'check_result'], retention=True),
diff --git a/shinken/objects/trigger.py b/shinken/objects/trigger.py
index 4b0fcd5..a7a0c3a 100644
--- a/shinken/objects/trigger.py
+++ b/shinken/objects/trigger.py
@@ -41,11 +41,13 @@ class Trigger(Item):
 
     properties = Item.properties.copy()
     properties.update({'trigger_name': StringProp(fill_brok=['full_status']),
-                       'code_src': StringProp(default='', fill_brok=['full_status'])
+                       'code_src': StringProp(default='', fill_brok=['full_status']),
                        })
 
     running_properties = Item.running_properties.copy()
-    running_properties.update({'code_bin': StringProp(default=None)})
+    running_properties.update({'code_bin': StringProp(default=None),
+                               'trigger_broker_raise_enabled': BoolProp(default='0')
+                               })
 
     # For debugging purpose only (nice name)
     def get_name(self):
@@ -70,11 +72,12 @@ class Trigger(Item):
         exec code in dict(locals())
 
     def __getstate__(self):
-        return {'trigger_name': self.trigger_name, 'code_src': self.code_src}
+        return {'trigger_name': self.trigger_name, 'code_src': self.code_src, 'trigger_broker_raise_enabled': self.trigger_broker_raise_enabled}
 
     def __setstate__(self, d):
         self.trigger_name = d['trigger_name']
         self.code_src = d['code_src']
+        self.trigger_broker_raise_enabled = d['trigger_broker_raise_enabled']
 
 
 class Triggers(Items):
diff --git a/shinken/scheduler.py b/shinken/scheduler.py
index e37be4c..942387d 100644
--- a/shinken/scheduler.py
+++ b/shinken/scheduler.py
@@ -1326,10 +1326,8 @@ class Scheduler:
 
         # Check maintenance periods
         for elt in [y for y in [x for x in self.hosts] + [x for x in self.services] if y.maintenance_period is not None]:
-            if not hasattr(elt, 'in_maintenance'):
-                setattr(elt, 'in_maintenance', False)
 
-            if not elt.in_maintenance:
+            if elt.in_maintenance is None:
                 if elt.maintenance_period.is_time_valid(now):
                     start_dt = elt.maintenance_period.get_next_valid_time_from_t(now)
                     end_dt = elt.maintenance_period.get_next_invalid_time_from_t(start_dt + 1) - 1
@@ -1341,7 +1339,7 @@ class Scheduler:
             else:
                 if not elt.in_maintenance in self.downtimes:
                     # the main downtimes has expired or was manually deleted
-                    elt.in_maintenance = False
+                    elt.in_maintenance = None
 
         #  Check the validity of contact downtimes
         for elt in self.contacts:
diff --git a/test/etc/triggers/services.cfg b/test/etc/triggers/services.cfg
index 71bdfff..5b77ee9 100644
--- a/test/etc/triggers/services.cfg
+++ b/test/etc/triggers/services.cfg
@@ -77,6 +77,7 @@ define service{
        host_name                      test_host_0
        service_description            cpu_too_high_bis
        use                            generic-service
+       trigger_broker_raise_enabled            1
        trigger                        \n\
 cpu = perf(self, 'cpu')               \n\
 print "Founded cpu", cpu              \n\
diff --git a/test/test_maintenance_period.py b/test/test_maintenance_period.py
index de298fd..d354dc7 100755
--- a/test/test_maintenance_period.py
+++ b/test/test_maintenance_period.py
@@ -98,7 +98,7 @@ class TestMaintPeriod(ShinkenTest):
         print "planned stop ", time.asctime(time.localtime(t_next))
         svc3.maintenance_period = t
 
-        self.assert_(not hasattr(svc3, 'in_maintenance'))
+        self.assert_(not svc3.in_maintenance)
         #
         # now let the scheduler run and wait until the maintenance period begins
         # it is now 10 seconds before the full minute. run for 30 seconds
@@ -136,7 +136,7 @@ class TestMaintPeriod(ShinkenTest):
         self.assert_(len(self.sched.downtimes) == 0)
         self.assert_(len(svc3.downtimes) == 0)
         self.assert_(not svc3.in_scheduled_downtime)
-        self.assert_(svc3.in_maintenance == False)
+        self.assert_(svc3.in_maintenance is None)
 
 
 
diff --git a/test/test_properties_defaults.py b/test/test_properties_defaults.py
index 3510f39..09fdd35 100755
--- a/test/test_properties_defaults.py
+++ b/test/test_properties_defaults.py
@@ -518,6 +518,7 @@ class TestHost(PropertiesTester, ShinkenTest, unittest.TestCase):
         ('business_impact', '2'),
         ('trigger', ''),
         ('trigger_name', ''),
+        ('trigger_broker_raise_enabled', '0'),
         ('time_to_orphanage', '300'),
         ('trending_policies', ''),
         ('checkmodulations', ''),
@@ -781,6 +782,7 @@ class TestService(PropertiesTester, ShinkenTest, unittest.TestCase):
         ('business_impact', '2'),
         ('trigger', ''),
         ('trigger_name', ''),
+        ('trigger_broker_raise_enabled', '0'),
         ('time_to_orphanage', '300'),
         ('trending_policies', ''),
         ('checkmodulations', ''),
diff --git a/test/test_triggers.py b/test/test_triggers.py
index 516c772..6276587 100755
--- a/test/test_triggers.py
+++ b/test/test_triggers.py
@@ -111,15 +111,18 @@ class TestTriggers(ShinkenTest):
     # Try to catch the perf_datas of self
     def test_morecomplex_cpu_too_high(self):
         svc = self.sched.services.find_srv_by_name_and_hostname("test_host_0", "cpu_too_high_bis")
-        svc.output = 'I am OK'
-        svc.perf_data = 'cpu=95%'
-        # Go launch it!
-        svc.eval_triggers()
-        self.scheduler_loop(2, [])
+
+        firstlen = len([b for b in self.sched.broks.values() if b.type == 'service_check_result'])
+        self.scheduler_loop(1, [(svc, 0, 'I am OK | cpu=95%')])
+        seclen = len([b for b in self.sched.broks.values() if b.type == 'service_check_result'])
+        self.scheduler_loop(1, [])
         print "Output", svc.output
         print "Perf_Data", svc.perf_data
+        print firstlen, seclen
+
         self.assert_(svc.output == "not good!")
         self.assert_(svc.perf_data == "cpu=95")
+        self.assert_(firstlen == seclen)
 
     # Try to load .trig files
     def test_trig_file_loading(self):
