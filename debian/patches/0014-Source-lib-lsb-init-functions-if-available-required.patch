From: Mathieu Parent <math.parent@gmail.com>
Date: Wed, 12 Feb 2014 18:06:21 +0100
Subject: Source /lib/lsb/init-functions if available (required)

---
 bin/init.d/shinken-arbiter     | 4 ++++
 bin/init.d/shinken-broker      | 4 ++++
 bin/init.d/shinken-poller      | 4 ++++
 bin/init.d/shinken-reactionner | 4 ++++
 bin/init.d/shinken-receiver    | 4 ++++
 bin/init.d/shinken-scheduler   | 4 ++++
 bin/init.d/shinken.in          | 4 +++-
 7 files changed, 27 insertions(+), 1 deletion(-)

diff --git a/bin/init.d/shinken-arbiter b/bin/init.d/shinken-arbiter
index 1a850d2..e39d14d 100755
--- a/bin/init.d/shinken-arbiter
+++ b/bin/init.d/shinken-arbiter
@@ -23,6 +23,10 @@ curdir=$(dirname "$0")
 
 export SHINKEN_MODULE_FILE="$NAME"  ## for 'shinken' init script to see that it's called by us
 
+if [ -f /lib/lsb/init-functions ]; then
+. /lib/lsb/init-functions
+fi
+
 "$curdir/shinken" $@ arbiter
 
 exit $?
diff --git a/bin/init.d/shinken-broker b/bin/init.d/shinken-broker
index 77b0ada..3aa9477 100755
--- a/bin/init.d/shinken-broker
+++ b/bin/init.d/shinken-broker
@@ -29,6 +29,10 @@ curdir=$(dirname "$0")
 
 export SHINKEN_MODULE_FILE="$NAME"  ## for 'shinken' init script to see that it's called by us
 
+if [ -f /lib/lsb/init-functions ]; then
+. /lib/lsb/init-functions
+fi
+
 "$curdir/shinken" $@ broker
 
 exit $?
diff --git a/bin/init.d/shinken-poller b/bin/init.d/shinken-poller
index e5ec0c4..b442136 100755
--- a/bin/init.d/shinken-poller
+++ b/bin/init.d/shinken-poller
@@ -30,6 +30,10 @@ curdir=$(dirname "$0")
 
 export SHINKEN_MODULE_FILE="$NAME"  ## for 'shinken' init script to see that it's called by us
 
+if [ -f /lib/lsb/init-functions ]; then
+. /lib/lsb/init-functions
+fi
+
 "$curdir/shinken" $@ poller
 
 exit $?
diff --git a/bin/init.d/shinken-reactionner b/bin/init.d/shinken-reactionner
index feedb01..660696a 100755
--- a/bin/init.d/shinken-reactionner
+++ b/bin/init.d/shinken-reactionner
@@ -29,6 +29,10 @@ curdir=$(dirname "$0")
 
 export SHINKEN_MODULE_FILE="$NAME"  ## for 'shinken' init script to see that it's called by us
 
+if [ -f /lib/lsb/init-functions ]; then
+. /lib/lsb/init-functions
+fi
+
 "$curdir/shinken" $@ reactionner
 
 exit $?
diff --git a/bin/init.d/shinken-receiver b/bin/init.d/shinken-receiver
index 7c7f385..ef71f70 100755
--- a/bin/init.d/shinken-receiver
+++ b/bin/init.d/shinken-receiver
@@ -29,6 +29,10 @@ curdir=$(dirname "$0")
 
 export SHINKEN_MODULE_FILE="$NAME"  ## for 'shinken' init script to see that it's called by us
 
+if [ -f /lib/lsb/init-functions ]; then
+. /lib/lsb/init-functions
+fi
+
 "$curdir/shinken" $@ receiver
 
 exit $?
diff --git a/bin/init.d/shinken-scheduler b/bin/init.d/shinken-scheduler
index c487d7b..4f7f567 100755
--- a/bin/init.d/shinken-scheduler
+++ b/bin/init.d/shinken-scheduler
@@ -29,6 +29,10 @@ curdir=$(dirname "$0")
 
 export SHINKEN_MODULE_FILE="$NAME"  ## for 'shinken' init script to see that it's called by us
 
+if [ -f /lib/lsb/init-functions ]; then
+. /lib/lsb/init-functions
+fi
+
 "$curdir/shinken" $@ scheduler
 
 exit $?
diff --git a/bin/init.d/shinken.in b/bin/init.d/shinken.in
index 5b52f4f..80da86a 100755
--- a/bin/init.d/shinken.in
+++ b/bin/init.d/shinken.in
@@ -213,7 +213,9 @@ echo_failure() {
 # Source function library.
 [ -f /etc/rc.d/init.d/functions ] && . /etc/rc.d/init.d/functions
 
-[ -f /lib/lsb/init-functions ] && . /lib/lsb/init-functions
+if [ -f /lib/lsb/init-functions ]; then
+. /lib/lsb/init-functions
+fi
 
 
 
